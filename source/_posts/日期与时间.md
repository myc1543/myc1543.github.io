---
title: 日期与时间
typora-root-url: 日期与时间
date: 2026-01-15 14:56:19
tags: [Java]
categories: [Java]
description: 这篇文章来聊聊日期和时间。
---

## 1. 从现实角度看日期和时间

在日常生活中，我们说早上八点，默认是对应了北京时间，也就是北京时间的早上八点。但是在其他地区，在北京时间早上八点的此时此刻，对应的就是纽约时间的前一天晚上9点。所以在使用日期的时候，一定要注意地区差异。

**补充知识**

时区的概念源于地理上的时区。地球自转一圈为24小时，转过360度。所以每个地方的本地时间都不相同，经度每相差15度，本地时间相差1小时。

由于每个地方的本地时间都不同，所以引出了更大范围的时区的概念。

![世界时区划分](1153954-20230117192119560-1554666043.png) 

以本初子午线为0经度，每15度为一个时区。更通用于地区统一时间。比如我国的经度横跨 73°-135°，地理上包括5个时区，但是为了统一，就使用东八区的时间作为全国统一的北京时间。



现在我们知道了每个地区的时间是不同的，那有没有统一的时间来表示当前时间？

有的，**时间戳就是一个全球统一的时间，不会因为地区差异而改变。时间戳（Unix Timestamp）是一个绝对时间点，表示从 1970-01-01 00:00:00 UTC 以来经过的秒数（或毫秒数）**



## 2.Java中的时间表示

### 2.1 System

系统为我们提供了获取当前毫秒时间戳的方式，注意要使用long类型来存储，避免溢出

```
System.currentTimeMillis()
// 1768464868132
```



### 2.2 Date

Date本质是一个毫秒时间戳，没有时区的概念，存储从 1970-01-01 00:00:00 UTC 的毫秒数



#### 无参构造方法

````
public Date() {
        this(System.currentTimeMillis());
    }
````

本质是保存当前的毫秒时间戳



```
new Date().getTime()
```

获取Date的时间戳



#### 有参构造方法

```
public Date(int year, int month, int date, int hrs, int min, int sec) {
        int y = year + 1900;
        // month is 0-based. So we have to normalize month to support Long.MAX_VALUE.
        if (month >= 12) {
            y += month / 12;
            month %= 12;
        } else if (month < 0) {
            y += CalendarUtils.floorDivide(month, 12);
            month = CalendarUtils.mod(month, 12);
        }
        BaseCalendar cal = getCalendarSystem(y);
        cdate = (BaseCalendar.Date) cal.newCalendarDate(TimeZone.getDefaultRef());
        cdate.setNormalizedDate(y, month + 1, date).setTimeOfDay(hrs, min, sec, 0);
        getTimeImpl();
        cdate = null;
    }
```

Date这里的年是计算和1900的差值，月是从0-11而不是1-12。

**不建议使用Date来指定时间**



### 2.3 Calendar

Calendar 是 Java 提供的日期时间类，用来替代 Date 的很多已废弃方法。 它是一个抽象类，通常使用其子类 。Calendar是有时区的

#### 获取Calendar实例

默认使用当前系统的时区

```
Calendar calendar = Calendar.getInstance();
// 指定时区
Calendar calendar = Calendar.getInstance(TimeZone.getTimeZone("Asia/Shanghai"));
// 修改时区
calendar.setTimeZone(TimeZone.getTimeZone("America/New_York"));
```

#### 获取当前时间

```
calendar.getTime(); // 当前时间 Date类型
calendar.getTimeInMillis(); // 当前时间戳
```

#### 指定时间

```
 // 通过Date来设置时间
 public final void setTime(Date date) {
        setTimeInMillis(date.getTime());
    }
 
 // 毫秒时间戳来设置
 calendar.setTimeInMillis(timestamp);  
 
 //  指定时间
 public final void set(int year, int month, int date, int hourOfDay, int minute,
                          int second)
    {
        set(YEAR, year);
        set(MONTH, month);
        set(DATE, date);
        set(HOUR_OF_DAY, hourOfDay);
        set(MINUTE, minute);
        set(SECOND, second);
    }
 calendar.set(2019, Calendar.DECEMBER, 29,0,0,0);

```

注意通过指定时间来初始化，年是正常的年，月是0-12，所以推荐通过枚举类初始化月份



#### 操作日期 - add

add方法会自动进位/退位,比如1月31日+1个月 = 2月28日

```
calendar.add(Calendar.YEAR, 1);          // 加1年
calendar.add(Calendar.MONTH, -3);        // 减3个月
calendar.add(Calendar.DAY_OF_MONTH, 7);  // 加7天
calendar.add(Calendar.HOUR_OF_DAY, 5);   // 加5小时
```



#### 操作日期 - roll

```
calendar.roll(Calendar.DAY_OF_MONTH, 1);  // 日期+1,不影响月份
```

不会进位,只在当前单位范围内循环



## 3.日期字符串

通常，在业务中往往使用时间戳来传递，但是在前端展示时，通常是`2026-01-13 11:01`这种形式。所以这里有一个转换，字符串转为时间类型和时间类型转换为字符串

可以参考一下格式

| 格式                  | 示例                  |
| --------------------- | --------------------- |
| yyyyMMdd              | 20250115              |
| `yyyy-MM-dd`          | `2025-01-15`          |
| `yyyy-MM-dd HH`       | `2025-01-15 08`       |
| `yyyy-MM-dd HH:mm`    | `2025-01-15 08:30`    |
| `yyyy-MM-dd HH:mm:ss` | `2025-01-15 08:30:45` |
| `yyyyMMdd HH:mm`      | `20250115 08:30`      |
| `yyyy-MM-ddHH:mm:ss`  | `2025-01-15T08:30:45` |
| `HH:mm`               | `08:30`               |
| `MM月dd日`            | `01月15日`            |



### 3.1 字符串转时间

DateFormat将时间字符串转为时间

````
static Date getDateForString(String dateStr, String pattern){
        Date date=null;
        try {
            DateFormat fmt =new SimpleDateFormat(pattern);
            date = fmt.parse(dateStr);
            return date;
        } catch (ParseException e) {
            return null;
        }
    }
````





### 3.2 时间转字符串

```
 public static String getStringForDate(Date date, String pattern) {
        if (date == null) {
            return null;
        }
        try {
            SimpleDateFormat sdf = new SimpleDateFormat(pattern);
            return sdf.format(date);
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
    }
```

